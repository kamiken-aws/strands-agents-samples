# メモリ永続化エージェント

このチュートリアルでは、永続メモリを活用して複数のインタラクション間で情報を記憶できる Strands Agents の構築方法を示します。メモリ永続化により、エージェントは再起動後でも、コンテキストを維持し、以前の会話から情報を想起できます。

## 主要概念

- **エージェントメモリ**: エージェントが以前の会話から情報を保存・想起できるようにします
- **永続化**: エージェントを再起動した後でも情報が利用可能な状態を保ちます
- **ベクトルストレージ**: ベクトル埋め込みを使用して意味的に類似した情報を保存・検索します
- **実装**: [mem0.ai](https://mem0.ai) の `mem0_memory` ツールを使用します

## メモリバックエンドオプション

このチュートリアルは 3 つの異なるメモリバックエンド設定をサポートしています：

1. **OpenSearch Serverless**（AWS 環境に推奨）:
   - ベクトルストレージ用のフルマネージド AWS サービス
   - AWS 認証情報と権限が必要
   - 提供されたスクリプトで自動デプロイ

2. **FAISS**（ローカル開発のデフォルト）:
   - 外部サービスを必要としないローカルベクトルストア
   - 開発とテストに適しています
   - プロセスが終了するとメモリは失われます

3. **Mem0 プラットフォーム**:
   - [mem0.ai](https://mem0.ai) のクラウドベースメモリサービス
   - Mem0 API キーが必要
   - 設定の詳細はノートブックを参照してください

## ユースケース

- ユーザーの好みを記憶するパーソナルアシスタント
- 会話のコンテキストを維持するカスタマーサポートボット
- 学習進捗を追跡する教育エージェント
- 企業固有の情報を想起するエンタープライズアシスタント
- 会話履歴が価値を追加するあらゆるアプリケーション

## 始め方

### 前提条件
- Python 3.10+
- 適切な権限を持つ AWS アカウント（OpenSearch オプション用）
- Amazon Bedrock で有効化された Anthropic Claude モデル

### オプション 1: インタラクティブノートブック
Strands エージェントでのメモリ概念と実装を理解するために、含まれている Jupyter ノートブックを実行してください: `./personal_agent_with_memory.ipynb`

### オプション 2: コマンドラインデモ
インタラクティブなチャット体験のために:

1. 依存関係をインストール:
   ```
   pip install -r requirements.txt
   ```

2. OpenSearch サーバーレスリソースを作成:
   ```
   sh prereqs/deploy_OSS.sh
   ```

3. エージェントを起動:
   ```
   python personal_agent_with_memory.py
   ```

4. 質問をしたり情報を提供したりしてエージェントとやり取り:
   - 「コーヒーよりも紅茶が好きだと覚えておいて」と試してみる
   - 後で「私は何を飲むのが好き？」と尋ねる
   - 「memory」と言うと保存されたすべてのメモリを一覧表示

5. 完了したら、OpenSearch リソースを削除:
   ```
   sh prereqs/cleanup_OSS.sh
   ```

## メモリ操作

エージェントは 3 つの主要なメモリ操作をサポートしています：

- **store**: 後で検索するために重要な情報を保存
- **retrieve**: クエリに基づいて関連するメモリにアクセス
- **list**: 保存されたすべてのメモリを表示

## 実験のアイデア

- エージェントに個人的な事実を伝え、後の会話で想起できるか確認する
- インタラクション間でエージェントを再起動してメモリの永続性をテストする
- 非永続エージェントと比較してユーザーエクスペリエンスの違いを確認する
- さまざまなタイプの情報を試して、エージェントが何を最もよく記憶するかを確認する
- エージェントがメモリを使用してよりパーソナライズされた応答を提供する方法を探る

## アーキテクチャ

このチュートリアルは 2 つの可能なアーキテクチャを示します：

1. **OpenSearch Serverless**: 本番環境用の AWS マネージドベクトルデータベース
2. **Mem0 プラットフォーム**: 簡素化されたデプロイのためのクラウドベースメモリサービス

アーキテクチャ図と詳細な説明については、ノートブックを参照してください。
```
